{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/lenovo/Desktop/mydangdang/frontend/pages/login/login.vue?33c2","webpack:///C:/Users/lenovo/Desktop/mydangdang/frontend/pages/login/login.vue?e02b","webpack:///C:/Users/lenovo/Desktop/mydangdang/frontend/pages/login/login.vue?aefc","webpack:///C:/Users/lenovo/Desktop/mydangdang/frontend/pages/login/login.vue?445f","uni-app:///pages/login/login.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;;;AAGpD;AACiM;AACjM,gBAAgB,2MAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwvB,CAAgB,qwBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;ACe5wB;AACA,MADA,kBACA;AACA;AACA,iBADA;AAEA,eAFA;;;AAKA,GAPA;AAQA;AACA,iBADA,yBACA,CADA,EACA;AACA;AACA;AACA;AACA,0CAJA,CAIA;AACA,0DALA,CAKA;AACA,4DANA,CAMA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBADA;AAEA,iCAFA;;AAIA;AACA;AACA;AACA,2CADA,EACA;AACA;AACA,oCADA,EACA,wBADA,EAFA;;AAKA,wBALA;AAMA;AACA;AADA,WANA;AASA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,4BAFA;;;AAKA,WAnBA;AAoBA;AACA;AACA,WAtBA;;;AAyBA;;AAEA;AACA,0BADA;AAEA,wBAFA;;;AAKA;AACA,mCADA;;;AAIA,OA7CA,MA6CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA,KAlEA,EARA;;AA4EA,SA5EA,qBA4EA;;AAEA,GA9EA;AA+EA,QA/EA,oBA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAJA,CAIA;AACA;AACA,wDANA,CAMA;AACA;AACA;AACA;AACA,kBADA,EACA;AACA,uBAFA,EAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BADA;AAEA,sCAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;AAMA,WAvCA;AAwCA,qCAxCA,CAwCA;AAxCA;AA0CA,OApDA;;AAsDA;;AAEA;AACA,GA3IA,E","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&scoped=true&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b237504c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.7.9.20200527.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<button\n\t\t\tstyle=\"background-color: #4CD964;color: #ffffff;\nwidth: 700rpx;margin-top: 200rpx;border-radius: 40rpx;\"\n\t\t\topen-type=\"getUserInfo\"\n\t\t\tlang=\"zh_CN\"\n\t\t\t@getuserinfo=\"onGotUserInfo\"\n\t\t>\n\t\t\t确认授权微信登陆\n\t\t</button>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttopenid:'',\n\t\t\ttuser:''\n\t\t\t\n\t\t};\n\t},\n\tmethods: {\n\t\tonGotUserInfo(e) {\r\n\t\t\tconsole.log(\"eeeeeeeeee\",e)\n\t\t\tconsole.info(e.detail);\n\t\t\tconsole.info(e.detail.userInfo);\r\n\t\t\tconsole.info(\"抽疯\",e.detail.errMsg);//getUserInfo:ok 表成功 getUserInfo:fail auth deny表失败\r\n\t\t\tconsole.info(\"抽疯成功\",e.detail.errMsg.indexOf(\"ok\"));//点了允许,会返回12  否则返回-1\r\n\t\t\tconsole.info(\"抽疯失败\",e.detail.errMsg.indexOf(\"fail\"));//点了拒绝会返回12  否则返回-1\r\n\t\t\t//如果用户点了允许,我们获取了用户数据,保存了\r\n\t\t\t\r\n\t\t\tif(e.detail.errMsg.indexOf(\"ok\") != -1){\r\n\t\t\t\tconsole.log(\"用户点了允许\")\r\n\t\t\t\tthis.tuser=e.detail.userInfo\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'myuser',\r\n\t\t\t\t\tdata: e.detail.userInfo\r\n\t\t\t\t});\r\n\t\t\t\t/////下面是用户数据写入数据库,用户表和扩展表\r\n\t\t\t\tconsole.log('函数启动了888666');\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'http://127.0.0.1/usertest/', //仅为示例，并非真实接口地址。\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\"myuserinfo\": this.tuser,\"myopenid\":this.topenid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t// 'custom-header': 'hello' //自定义请求头信息\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t//用户表没建,先把成功获取用户id的功能注释\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tconsole.log(\"收到后端发来的登陆用户的myusertwo表中的id\",res.data);\r\n\t\t\t\t\t\t//res.data就是登陆用户在myusertwo表中的id,我们现在写入本地\r\n\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\tkey: 'userid',\r\n\t\t\t\t\t\t\tdata: res.data\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tconsole.log(\"openid数据写入失败\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t/////\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '欢迎您,已登陆',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(\"用户点了拒绝\")\r\n\t\t\t\t//这里放他拒绝了之后,我们的代码,可以跳到登陆页让它手机号登陆等等\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// if(e.detail.errMsg.indexOf(\"fail\") != -1){\r\n\t\t\t// \tconsole.log(\"用户点了拒绝\")\r\n\t\t\t// }\r\n\t\t\t\n\t\t\t\n\t\t}\n\t},\n\tcreated() {\n\t\t\n\t},\n\tonLoad() {\n\t\t///////////////////////////////////////////\n\t\t//漫路h\n\t\tuni.login({\n\t\t\tsuccess: res => {\n\t\t\t\t//code值(5分钟失效)\n\t\t\t\tconsole.log('我的code-----' + res.code);\n\t\t\t\t//小程序appid\n\t\t\t\tlet appid = 'wx8f60753d3939d7c1'; //\\\n\t\t\t\t//小程序secret\n\t\t\t\tlet secret = 'a51dc26912ddde5e7c254bc70448b09b'; //\\\n\t\t\t\t//wx接口路径\n\t\t\t\tlet url = 'https://api.weixin.qq.com/sns/jscode2session?appid=' + appid + '&secret=' + secret + '&js_code=' + res.code + '&grant_type=authorization_code';\n\t\t\t\tuni.request({\n\t\t\t\t\turl: url, // 请求路径\n\t\t\t\t\tmethod: 'GET', //请求方式\n\t\t\t\t\tsuccess: result => {\n\t\t\t\t\t\t//响应成功\n\t\t\t\t\t\t//这里就获取到了openid了\n\t\t\t\t\t\tconsole.log('我的openid-----' + result.data.openid);\n\t\t\t\t\t\tthis.topenid=result.data.openid\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\tkey: 'myopenid',\n\t\t\t\t\t\t\tdata: result.data.openid\n\t\t\t\t\t\t});\n\t\t\t\t\t\t////这里测试\n\t\t\t\t\t\t\t// console.log('函数启动了888666');\n\t\t\t\t\t\t\t// uni.request({\n\t\t\t\t\t\t\t// \turl: 'http://127.0.0.1/usertest/', //仅为示例，并非真实接口地址。\n\t\t\t\t\t\t\t// \tdata: {\n\t\t\t\t\t\t\t// \t\t\"myuserinfo\": this.tuser,\"myopenid\":this.topenid\n\t\t\t\t\t\t\t// \t},\n\t\t\t\t\t\t\t// \tmethod: 'POST',\n\t\t\t\t\t\t\t// \theader: {\n\t\t\t\t\t\t\t// \t\t// 'custom-header': 'hello' //自定义请求头信息\n\t\t\t\t\t\t\t// \t},\n\t\t\t\t\t\t\t// \tsuccess: res => {\n\t\t\t\t\t\t\t// \t\tconsole.log(res);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// \t},\n\t\t\t\t\t\t\t// \tfail: res => {\n\t\t\t\t\t\t\t// \t\tconsole.log(\"openid数据写入失败\");\n\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t// });\n\t\t\t\t\t\t\n\t\t\t\t\t\t///这里测试\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {} //失败\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t///////////////////上面是获取code和opendid,下面是获取微信头像签名位置等信息\n\n\t\t/////////////////////////////////\n\t}\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":""}